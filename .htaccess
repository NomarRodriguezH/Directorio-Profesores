<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Redirigir todas las solicitudes .php a versión sin extensión (301 permanente)
    RewriteCond %{THE_REQUEST} \s/+(.*?/)?(.+?)\.php[\s?] [NC]
    RewriteRule ^ /%1%2 [R=301,L,NE]

    # Reescribir internamente URLs sin .php a su versión con .php
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME}\.php -f
    RewriteRule ^(.+?)/?$ $1.php [L]

    # Excluir assets y otros directorios
    RewriteRule ^(assets|includes|src|paginas)/ - [L,NC]
</IfModule>